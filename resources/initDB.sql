DROP TABLE PDB_MEDIA;
DROP TABLE PDB_SPATIAL;
DROP TABLE PDB_COMPANY;
DROP TABLE PDB_LOGGING_HISTORY;

DROP INDEX PDB_SPATIAL_GEOMETRY_SIDX;


CREATE TABLE PDB_MEDIA
(
    ID VARCHAR2(64) PRIMARY KEY NOT NULL,
    NAME VARCHAR2(64),
    PHOTO ORDSYS.ORDImage,
    PHOTO_SI ORDSYS.SI_StillImage,
    PHOTO_AC ORDSYS.SI_AverageColor,
    PHOTO_CH ORDSYS.SI_ColorHistogram,
    PHOTO_PC ORDSYS.SI_PositionalColor,
    PHOTO_TX ORDSYS.SI_Texture
);

CREATE TABLE PDB_SPATIAL
(
     ID VARCHAR2(64) NOT NULL,
     OBJECT_TYPE VARCHAR2(16),
     CATEGORY nvarchar2(32),
     GEOMETRY SDO_GEOMETRY,
     NAME nvarchar2(32),
     ADMIN nvarchar2(32),
     OWNER nvarchar2(32),
     NOTE nvarchar2(512),
     VALID_FROM NUMBER(20) NOT NULL,
     VALID_TO NUMBER(20) NOT NULL,
     CREATED DATE,
     MODIFIED DATE,
     SPECIAL_FIELD INTEGER
);

DELETE FROM USER_SDO_GEOM_METADATA WHERE
  TABLE_NAME = 'PDB_SPATIAL' AND COLUMN_NAME = 'GEOMETRY';

INSERT INTO USER_SDO_GEOM_METADATA VALUES (
  'PDB_SPATIAL', 'GEOMETRY',
  SDO_DIM_ARRAY(SDO_DIM_ELEMENT('X', 0, 2000, 1), SDO_DIM_ELEMENT('Y', 0, 2000, 1)),
  NULL
);


CREATE INDEX PDB_SPATIAL_GEOMETRY_SIDX ON PDB_SPATIAL(GEOMETRY) INDEXTYPE IS MDSYS.SPATIAL_INDEX;


CREATE TABLE PDB_COMPANY
(
    ID VARCHAR(64),
    NAME VARCHAR(100),
    VALID_FROM NUMBER(20),
    VALID_TO NUMBER(20)
);

CREATE TABLE PDB_LOGGING_HISTORY
(
     ID VARCHAR(64),
     COMPANY_ID VARCHAR(64),
     COMPANY_NAME VARCHAR(100),
     LOGGING_AREA VARCHAR(300),
     LOGS_PER_DAY INTEGER,
     VALID_FROM NUMBER(20),
     VALID_TO NUMBER(20)
);


INSERT INTO PDB_SPATIAL (id, object_type,category,geometry,name,admin,owner,valid_from,valid_to)
   VALUES (1, 'FOREST', 'Pohadkovy',
       SDO_GEOMETRY(2003, NULL, NULL,
          SDO_ELEM_INFO_ARRAY(1, 1003, 1),
          SDO_ORDINATE_ARRAY(420,60, 650,10, 600,75, 545,75, 510,190, 480,90, 420,60)
       ),
      'Raholec', 'Rumcajs', 'Knize', 0, 2932532
   );

INSERT INTO PDB_SPATIAL (id, object_type,category,geometry,name,admin,owner,valid_from,valid_to)
   VALUES (2, 'FOREST', 'Pohadkovy 2',
       SDO_GEOMETRY(2003, NULL, NULL,
          SDO_ELEM_INFO_ARRAY(1, 1003, 1),
          SDO_ORDINATE_ARRAY(200,500, 380,460, 280,650, 200,500)
       ),
      'Novy Raholec', 'Rumcajs', 'Knize', 10000, 2932532
   );

INSERT INTO PDB_COMPANY (ID, NAME, VALID_FROM, VALID_TO) VALUES ('250426869235139793', 'Lesaci Brno s.r.o.', 9483, 10957);
INSERT INTO PDB_COMPANY (ID, NAME, VALID_FROM, VALID_TO) VALUES ('250426869235139793', 'Lesaci Brno s.r.o.', 10957, 12784);
INSERT INTO PDB_COMPANY (ID, NAME, VALID_FROM, VALID_TO) VALUES ('250426869235139793', 'Lesaci Brno s.r.o.', 12784, 2932884);
INSERT INTO PDB_COMPANY (ID, NAME, VALID_FROM, VALID_TO) VALUES ('-1811051922436304899', 'Drevo Olomouc', 12784, 2932884);
INSERT INTO PDB_COMPANY (ID, NAME, VALID_FROM, VALID_TO) VALUES ('-1811051922436304899', 'Drevo Olomouc', 10957, 12784);

INSERT INTO PDB_LOGGING_HISTORY (ID, COMPANY_ID, COMPANY_NAME, LOGGING_AREA, LOGS_PER_DAY, VALID_FROM, VALID_TO) VALUES ('-3921250388357922245', '250426869235139793', 'Lesaci Brno s.r.o.', 'Luzanky', 50, 9483, 10957);
INSERT INTO PDB_LOGGING_HISTORY (ID, COMPANY_ID, COMPANY_NAME, LOGGING_AREA, LOGS_PER_DAY, VALID_FROM, VALID_TO) VALUES ('3529065332653509560', '250426869235139793', 'Lesaci Brno s.r.o.', 'Raholec', 70, 10957, 12784);
INSERT INTO PDB_LOGGING_HISTORY (ID, COMPANY_ID, COMPANY_NAME, LOGGING_AREA, LOGS_PER_DAY, VALID_FROM, VALID_TO) VALUES ('4657936613281581797', '-1811051922436304899', 'Drevo Olomouc', 'Raholec', 15, 10957, 12784);